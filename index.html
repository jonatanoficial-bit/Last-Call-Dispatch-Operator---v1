<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Last Call Dispatch Operator</title>

<style>
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background: #0b0e13;
  color: #eaeaea;
}

header {
  background: #111826;
  padding: 10px;
  text-align: center;
  font-weight: bold;
  color: #4fd1c5;
}

main {
  display: flex;
  flex-direction: column;
  padding: 10px;
  gap: 10px;
}

.panel {
  background: #161b22;
  border-radius: 8px;
  padding: 10px;
}

.panel h3 {
  margin: 0 0 8px 0;
  color: #63b3ed;
}

#callText {
  min-height: 80px;
  font-family: "Courier New", monospace;
  white-space: pre-wrap;
}

button {
  background: #2563eb;
  border: none;
  color: #fff;
  padding: 10px;
  border-radius: 6px;
  font-size: 14px;
}

button:disabled {
  background: #444;
}

.options {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

footer {
  text-align: center;
  font-size: 12px;
  opacity: 0.6;
}
</style>
</head>

<body>

<header>
Last Call Dispatch Operator â€” Chamadas AAA
</header>

<main>

<div class="panel">
  <h3>Chamada Ativa</h3>
  <div id="callText"></div>
</div>

<div class="panel">
  <h3>AÃ§Ãµes do Operador</h3>
  <div class="options" id="options"></div>
</div>

<button id="startBtn">Iniciar Nova Chamada</button>

</main>

<footer>
Simulador educativo â€” versÃ£o protÃ³tipo
</footer>

<script>
const callTextEl = document.getElementById("callText");
const optionsEl = document.getElementById("options");
const startBtn = document.getElementById("startBtn");

let typingInterval = null;
let currentCall = null;

const CALLS = [
  {
    severity: "trote",
    intro: "Oi... Ã© brincadeira ðŸ˜‚",
    steps: [
      {
        text: "O chamador estÃ¡ rindo e nÃ£o fornece informaÃ§Ãµes.",
        options: [
          { label: "Encerrar chamada", result: "Trote identificado. Bom trabalho." },
          { label: "Enviar viatura", result: "Erro: recurso desperdiÃ§ado." }
        ]
      }
    ]
  },
  {
    severity: "leve",
    intro: "Tem um vizinho fazendo muito barulho.",
    steps: [
      {
        text: "O problema parece sem risco imediato.",
        options: [
          { label: "Orientar e registrar", result: "OcorrÃªncia leve resolvida." },
          { label: "Enviar viatura", result: "Resposta aceitÃ¡vel, mas exagerada." }
        ]
      }
    ]
  },
  {
    severity: "media",
    intro: "Houve um acidente de trÃ¢nsito, acho que alguÃ©m se machucou.",
    steps: [
      {
        text: "O chamador parece nervoso.",
        options: [
          { label: "Perguntar se hÃ¡ vÃ­timas", next: 1 },
          { label: "Enviar ajuda imediatamente", result: "Ajuda enviada rapidamente." }
        ]
      },
      {
        text: "Uma pessoa estÃ¡ ferida e sangrando.",
        options: [
          { label: "Orientar primeiros socorros", result: "VÃ­tima estabilizada." },
          { label: "Mandar aguardar", result: "Erro: situaÃ§Ã£o piorou." }
        ]
      }
    ]
  },
  {
    severity: "grave",
    intro: "SOCORRO! EstÃ£o atirando aqui!",
    steps: [
      {
        text: "HÃ¡ tiros ao fundo e gritos.",
        options: [
          { label: "Manter chamador em seguranÃ§a", next: 1 },
          { label: "Pedir mais detalhes", result: "Erro: tempo perdido." }
        ]
      },
      {
        text: "O chamador diz que o suspeito estÃ¡ armado.",
        options: [
          { label: "Despachar unidade tÃ¡tica", result: "Resposta correta. Vidas salvas." },
          { label: "Enviar patrulha comum", result: "Erro grave. VÃ­tima fatal." }
        ]
      }
    ]
  }
];

function typeText(text, callback) {
  clearInterval(typingInterval);
  callTextEl.textContent = "";
  let i = 0;
  typingInterval = setInterval(() => {
    callTextEl.textContent += text.charAt(i);
    i++;
    if (i >= text.length) {
      clearInterval(typingInterval);
      if (callback) callback();
    }
  }, 30);
}

function showStep(stepIndex) {
  optionsEl.innerHTML = "";
  const step = currentCall.steps[stepIndex];

  typeText(step.text);

  step.options.forEach(opt => {
    const btn = document.createElement("button");
    btn.textContent = opt.label;
    btn.onclick = () => {
      if (opt.next !== undefined) {
        showStep(opt.next);
      } else {
        typeText(opt.result);
        optionsEl.innerHTML = "";
      }
    };
    optionsEl.appendChild(btn);
  });
}

startBtn.onclick = () => {
  currentCall = CALLS[Math.floor(Math.random() * CALLS.length)];
  optionsEl.innerHTML = "";
  typeText(
    "Central de emergÃªncia.\n\n" +
    currentCall.intro,
    () => showStep(0)
  );
};
</script>

</body>
</html>